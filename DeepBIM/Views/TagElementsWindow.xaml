<Window x:Class="DeepBIM.Views.TagElementsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:DeepBIM.ViewModels"
        xmlns:svc="clr-namespace:DeepBIM.Services"
        mc:Ignorable="d"
        Title="Pipe Tags Tool"
        Width="800" Height="480"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResizeWithGrip">

    <Window.Resources>
        <!-- RadioButton <-> Enum helper -->
        <svc:EnumToBooleanConverter x:Key="EnumToBooleanConverter"/>

        <!-- Nhìn cho gọn gàng một chút -->
        <Style TargetType="GroupBox">
            <Setter Property="Margin" Value="12"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>

        <Style TargetType="Button" x:Key="AccentButton">
            <Setter Property="Margin" Value="0,8,0,0"/>
            <Setter Property="Padding" Value="18,8"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Background" Value="#D45C4B"/>
            <Setter Property="BorderBrush" Value="#C34C3D"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- ======= CONTENT ======= -->
        <Grid Grid.Row="0" Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="2*"/>
            </Grid.ColumnDefinitions>

            <!-- (1) SELECT TAG TYPE -->
            <GroupBox Header="1. SELECT TAG TYPE" Grid.Column="0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="10"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="100"/>
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" Text="1. Elevation Tag"/>
                    <ComboBox Grid.Row="0" Grid.Column="1" Margin="8,0,0,0"
                              ItemsSource="{Binding TagFamilies}"
                              SelectedItem="{Binding SelectedElevationTagFamily, Mode=TwoWay}"
                              IsSynchronizedWithCurrentItem="True"
                              MinWidth="180"/>

                    <TextBlock Grid.Row="2" Grid.Column="0" VerticalAlignment="Center" Text="2. Diameter Tag"/>
                    <ComboBox Grid.Row="2" Grid.Column="1" Margin="8,0,0,0"
                              ItemsSource="{Binding TagFamilies}"
                              SelectedItem="{Binding SelectedDiameterTagFamily, Mode=TwoWay}"
                              IsSynchronizedWithCurrentItem="True"
                              MinWidth="180"/>
                </Grid>
            </GroupBox>

            <!-- (2) SELECT ONE OPTION -->
            <GroupBox Header="2. SELECT ONE OPTION" Grid.Column="1">
                <StackPanel>
                    <RadioButton Content="1. Only Elevation" GroupName="TagOptions"
                                 IsChecked="{Binding SelectedOption, Mode=TwoWay,
                                             Converter={StaticResource EnumToBooleanConverter},
                                             ConverterParameter={x:Static vm:TagOption.OnlyElevation}}"/>
                    <RadioButton Content="2. Only Diameter" GroupName="TagOptions"
                                 IsChecked="{Binding SelectedOption, Mode=TwoWay,
                                             Converter={StaticResource EnumToBooleanConverter},
                                             ConverterParameter={x:Static vm:TagOption.OnlyDiameter}}"/>
                    <RadioButton Content="3. Elevation - Diameter" GroupName="TagOptions"
                                 IsChecked="{Binding SelectedOption, Mode=TwoWay,
                                             Converter={StaticResource EnumToBooleanConverter},
                                             ConverterParameter={x:Static vm:TagOption.ElevMinusDia}}"/>
                    <RadioButton Content="4. Elev - Dia by Length" GroupName="TagOptions"
                                 IsChecked="{Binding SelectedOption, Mode=TwoWay,
                                             Converter={StaticResource EnumToBooleanConverter},
                                             ConverterParameter={x:Static vm:TagOption.ElevDiaByLength}}"/>
                    <RadioButton Content="5. Start_End Elevation" GroupName="TagOptions"
                                 IsChecked="{Binding SelectedOption, Mode=TwoWay,
                                             Converter={StaticResource EnumToBooleanConverter},
                                             ConverterParameter={x:Static vm:TagOption.StartEndElevation}}"/>
                    <RadioButton Content="6. Start_End Elevation - Dia" GroupName="TagOptions"
                                 IsChecked="{Binding SelectedOption, Mode=TwoWay,
                                             Converter={StaticResource EnumToBooleanConverter},
                                             ConverterParameter={x:Static vm:TagOption.StartEndElevationMinusDia}}"/>
                </StackPanel>
            </GroupBox>

            <!-- (3) PIPE LENGTH -->
            <GroupBox Header="3. PIPE LENGTH" Grid.Column="2">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="6"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="6"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="6"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="6"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="6"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- 6 ô nhập tương ứng với 6 tùy chọn -->
                    <TextBox Grid.Row="0"  Text="{Binding Length1}" IsEnabled="{Binding IsLen1Enabled}" MinWidth="140"/>
                    <TextBox Grid.Row="2"  Text="{Binding Length2}" IsEnabled="{Binding IsLen2Enabled}" MinWidth="140"/>
                    <TextBox Grid.Row="4"  Text="{Binding Length3}" IsEnabled="{Binding IsLen3Enabled}" MinWidth="140"/>
                    <TextBox Grid.Row="6"  Text="{Binding Length4}" IsEnabled="{Binding IsLen4Enabled}" MinWidth="140"/>
                    <TextBox Grid.Row="8"  Text="{Binding Length5}" IsEnabled="{Binding IsLen5Enabled}" MinWidth="140"/>
                    <TextBox Grid.Row="10" Text="{Binding Length6}" IsEnabled="{Binding IsLen6Enabled}" MinWidth="140"/>
                </Grid>
            </GroupBox>
        </Grid>

        <!-- ======= FOOTER BUTTONS ======= -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,8,0,12">
            <Button Style="{StaticResource AccentButton}" Width="120"
                    Content="Create" Command="{Binding CreateCommand}" IsDefault="True"/>
            <Button Margin="12,8,0,0" Padding="18,8" Width="120"
                    Content="Close" IsCancel="True"/>
        </StackPanel>
    </Grid>
</Window>
